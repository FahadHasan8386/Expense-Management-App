@page "/app/home"

<PageTitle>Home</PageTitle>

<div class="container mt-4">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <div>
            <h1 class="fw-bold">Expense Dashboard</h1>
            <p class="text-muted">Overview of your financial activities</p>
        </div>
        <div>
            <button class="btn btn-success"><i class="bi bi-wallet2"></i> Invoice</button>
            <button class="btn btn-primary me-2" @onclick="() => OnExpensesCreateUpdateClick(0)">
                <i class="bi bi-plus-circle"></i> Add Expense</button>
            <button class="btn btn-success" @onclick="() => OnDepositCreateUpdateClick(0)">
                <i class="bi bi-wallet2"></i> Add Deposit</button>
        </div>
    </div>
 </div>

<div class="row g-4 mb-4">
    <div class="col-md-3">
        <div class="card shadow-sm border-0 text-center p-3">
            <h6 class="text-muted">Total Expenses</h6>
            <h3 class="text-danger fw-bold">$1,250</h3>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card shadow-sm border-0 text-center p-3">
            <h6 class="text-muted">Total Deposits</h6>
            <h3 class="text-success fw-bold">$2,500</h3>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card shadow-sm border-0 text-center p-3">
            <h6 class="text-muted">Current Balance</h6>
            <h3 class="text-primary fw-bold">$1,250</h3>
        </div>
    </div>
  
</div>

<div class="row g-4 mb-4">
    <div class="col-md-6">
        <div class="card shadow-sm border-0 p-3">
            <h6 class="fw-bold mb-3">Expense by Category</h6>
            <canvas id="expensePieChart"></canvas>
        </div>
    </div>
    <div class="col-md-6">
        <div class="card shadow-sm border-0 p-3">
            <h6 class="fw-bold mb-3">Monthly Summary</h6>
            <canvas id="monthlyBarChart"></canvas>
        </div>
    </div>
</div>


@code{
	[Parameter]
    public long ExpenseId { get; set; }
    private bool IsLoading { get; set; } = false;
    private List<ExpensesViewModel> ExpensesViewModel { get; set; } = [];
    

    protected override async Task OnInitializedAsync()
    {
        IsLoading = true;
        await LoadExpensesAsync();
        IsLoading = false;
    }

    private async Task LoadExpensesAsync()
    {
        ExpensesViewModel = await ExpenseApiService.GetExpensesAsync();
    }

    private void OnExpensesCreateUpdateClick(long expenseId)
    {
        NavigationManager.NavigateTo($"/app/expenses/edit-form/{expenseId}");
    }

    private void OnDepositCreateUpdateClick(long depositId)
    {
        NavigationManager.NavigateTo($"/app/deposits/edit-form/{depositId}");
    }
}
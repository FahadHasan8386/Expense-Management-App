@page "/app/expenses/edit-form/{ExpenseId:long}"

<PageTitle>Create Expense</PageTitle>

<ExpenseComponente IsModal="false" ExpenseId="ExpenseId" ExpensesDto="ExpensesDto" ></ExpenseComponente>

@code {
	[Parameter]
	public long ExpenseId { get; set; }
	private ExpensesDto ExpensesDto { get; set; } = new();
	private ExpensesViewModel ExpensesViewModel { get; set; } = new();

	protected override async Task OnInitializedAsync()
	{
		if (ExpenseId > 0)
			await LoadExpenseAsync();
	}

	private async Task LoadExpenseAsync()
	{
		ExpensesViewModel = await ExpenseApiService.GetExpenseByIdAsync(ExpenseId);
		ExpensesDto.ExpenseId = ExpensesViewModel.ExpenseId;
		ExpensesDto.ExpenseCategoryId = ExpensesViewModel.ExpenseCategoryId;
		ExpensesDto.ExpenseAmount = ExpensesViewModel.ExpenseAmount;
		ExpensesDto.ExpenseDate = ExpensesViewModel.ExpenseDate;
		ExpensesDto.PaymentMethod = ExpensesViewModel.PaymentMethod;
		ExpensesDto.Remarks = ExpensesViewModel.Remarks;
	}

}